<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Will you be mine?</title>
<style>
  /* ---------- Base & Sky ---------- */
  *{box-sizing:border-box}
  html,body{height:100%;margin:0}
  :root{
    --sky-0: radial-gradient(1200px 800px at 30% 20%, #d8f1ff 0%, #bde4ff 30%, #9ad3ff 55%, #74bfff 80%, #61aef6 100%);
    --sky-1: radial-gradient(1200px 800px at 30% 20%, #e3f7ff 0%, #c9efff 35%, #aee3ff 62%, #8bd1ff 84%, #6abcf3 100%);
    --sky-2: radial-gradient(1200px 800px at 70% 25%, #def7ff 0%, #c0ecff 35%, #a1dbff 62%, #84caff 84%, #66b2f1 100%);
    --sky-3: radial-gradient(1200px 800px at 50% 70%, #dffaff 0%, #c8f1ff 35%, #b0e3ff 62%, #95d3ff 84%, #73bdf2 100%);
    --sky-4: radial-gradient(1200px 800px at 40% 40%, #d8f9ff 0%, #bbf0ff 35%, #a0e3ff 62%, #82d2ff 84%, #64b7ef 100%);
    --sky-5: radial-gradient(1200px 800px at 60% 30%, #e6fbff 0%, #c9f3ff 35%, #aee7ff 62%, #8fd8ff 84%, #6bbef3 100%);
    --sky-6: radial-gradient(1200px 800px at 50% 50%, #e9fbff 0%, #cff4ff 35%, #b5e9ff 62%, #90d7ff 84%, #6bbcf2 100%);
  }
  body{
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    color:#0b2447;
    overflow:hidden;
    background: var(--sky-0);
    transition: background 600ms ease;
  }

  /* ---------- Floating hearts (upwards) ---------- */
  .hearts{position:fixed;inset:0;pointer-events:none;z-index:1;overflow:hidden}
  .heart{
    position:absolute;width:14px;height:14px;transform:rotate(45deg);
    background:#ff6ea8;opacity:.55;filter:drop-shadow(0 6px 8px rgba(0,0,0,.12));
    animation:floatUp linear forwards;
  }
  .heart::before,.heart::after{
    content:"";position:absolute;inset:-50% auto auto -50%;
    width:14px;height:14px;border-radius:50%;background:inherit;
  }
  .heart::after{left:auto;right:-50%}
  @keyframes floatUp{
    0%{transform:translateY(0) rotate(45deg) scale(.8);opacity:0}
    10%{opacity:.6}
    90%{opacity:.6}
    100%{transform:translateY(-120vh) rotate(45deg) scale(1.1);opacity:0}
  }

  /* ---------- Falling green leaves (downwards) ---------- */
  .leaves{position:fixed;inset:0;pointer-events:none;z-index:1;overflow:hidden}
  .leaf{
    position:absolute; width:16px; height:10px;
    background:linear-gradient(90deg,#2db84a,#159c39);
    border-radius:10px 0 10px 0;
    transform:rotate(25deg) skewX(-10deg);
    box-shadow:0 4px 10px rgba(0,0,0,.12);
    opacity:.85;
    animation:fallLeaf linear forwards;
  }
  .leaf::after{
    content:""; position:absolute; inset:-2px auto auto 6px; width:2px; height:10px;
    background:rgba(255,255,255,.5); border-radius:1px;
    transform:rotate(-25deg);
  }
  @keyframes fallLeaf{
    0%{transform:translateY(-20px) rotate(15deg) skewX(-10deg); opacity:0}
    10%{opacity:.9}
    100%{transform:translateY(120vh) rotate(220deg) skewX(-10deg); opacity:0}
  }

  /* ---------- Main Card ---------- */
  .wrap{position:relative;z-index:2;height:100%;display:grid;place-items:center;padding:24px}
  .card{
    width:min(680px,92vw); padding: clamp(20px, 6vw, 36px);
    border-radius:20px; background:rgba(255,255,255,.55); backdrop-filter: blur(10px);
    box-shadow:0 10px 30px rgba(0,0,0,.12), inset 0 1px 0 rgba(255,255,255,.6);
    text-align:center; transition: background 300ms ease;
  }
  .title{font-weight:800; letter-spacing:.5px; font-size:clamp(26px,6.4vw,48px); margin:4px 0 16px; color:#0a2a5e}
  .subtitle{font-size:clamp(14px,3.5vw,18px); color:#184a90; opacity:.85; margin-bottom:26px}

  .actions{display:flex;align-items:center;justify-content:center;gap:clamp(12px,4vw,18px);flex-wrap:wrap}
  .btn{
    --bg1:#fff; --bg2:#eaf4ff; --fg:#0a2a5e; --ring: rgba(10,42,94,.15);
    appearance:none;border:0;padding:14px 22px;border-radius:999px;
    background:linear-gradient(180deg,var(--bg1),var(--bg2));color:var(--fg);font-weight:700;
    font-size:clamp(14px,4.2vw,18px); letter-spacing:.3px; cursor:pointer;
    box-shadow:0 10px 18px var(--ring), inset 0 1px 0 rgba(255,255,255,.8);
    transition: transform 140ms ease, filter 140ms ease, background 240ms ease, color 240ms ease;
  }
  .btn:active{transform:translateY(1px) scale(.99)}
  .btn-yes{ --bg1:#e9fff9; --bg2:#c8fff0; --fg:#035a4b; --ring:rgba(3,90,75,.2)}
  .btn-no { --bg1:#fff1f4; --bg2:#ffd8e3; --fg:#6b1027; --ring:rgba(107,16,39,.2)}
  .btn-yes:active{background:linear-gradient(180deg,#c8fff0,#aef6e5);color:#024135}
  .btn-no:active {background:linear-gradient(180deg,#ffd8e3,#ffc3d6);color:#4e0d1e}

  .success{margin-top:18px;color:#035a4b;font-weight:700;font-size:clamp(16px,4.6vw,22px);opacity:0;transform:translateY(8px);transition:280ms ease}
  .success.show{opacity:1;transform:translateY(0)}

  .dedication{
    position:fixed; right:14px; bottom:12px; z-index:3; font-weight:800; color:#0a2a5e;
    background:rgba(255,255,255,.55); backdrop-filter: blur(6px);
    padding:8px 14px; border-radius:999px; box-shadow:0 8px 18px rgba(0,0,0,.12), inset 0 1px 0 rgba(255,255,255,.7);
    font-size:clamp(12px,3.4vw,14px); white-space:nowrap;
  }

  /* ---------- Popup ---------- */
  .popup{
    position:fixed; z-index:4; min-width:260px; max-width:86vw; padding:16px 14px 12px;
    border-radius:16px; background:rgba(255,255,255,.95);
    box-shadow:0 14px 28px rgba(0,0,0,.22), inset 0 1px 0 rgba(255,255,255,.8);
    border:1px solid rgba(255,255,255,.7); display:none;
    transform-origin:center; animation:popIn 220ms ease;
  }
  .popup.show{display:block}
  @keyframes popIn{from{transform:scale(.95);opacity:0}to{transform:scale(1);opacity:1}}
  .popq{font-weight:800;color:#2d0f3a;margin:0 0 10px;font-size:16px}
  .popsub{font-size:13px;color:#415;opacity:.85;margin:-6px 0 12px}
  .pop-actions{display:flex;gap:10px;flex-wrap:wrap}
  .pop-note{font-size:12px;color:#234;opacity:.8;margin-top:6px}

  /* ---------- Bursts ---------- */
  .burst{position:fixed;inset:0;pointer-events:none;z-index:5}
  .p{position:absolute;width:10px;height:10px;border-radius:50%;background:#ff7ab6;opacity:0;transform:translate(-50%,-50%) scale(.6);animation:pop 900ms ease forwards}
  .p:nth-child(3n){background:#00e0c7}
  .p:nth-child(3n+1){background:#ffd166}
  .p:nth-child(4n){background:#a78bfa}
  @keyframes pop{0%{opacity:1}100%{opacity:0;transform:translate(var(--tx),var(--ty)) scale(1.2)}}

  /* ---------- End screens ---------- */
  .fullscreen{
    position:fixed;inset:0;display:grid;place-items:center;z-index:6;
    background:rgba(255,255,255,.6); backdrop-filter: blur(8px);
    font-weight:900; font-size:clamp(22px,6vw,40px); color:#0a2a5e; opacity:0; pointer-events:none;
    transition: opacity 500ms ease;
  }
  .fullscreen.show{opacity:1; pointer-events:auto}
</style>
  <link rel="manifest" href="manifest.json" />
<script>
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("service-worker.js")
      .then(() => console.log("Service Worker Registered"))
      .catch((error) => console.log("Service Worker Registration Failed:", error));
  }
</script>
</head>
<body>

<!-- Layers -->
<div class="hearts" id="hearts"></div>
<div class="leaves" id="leaves"></div>

<div class="wrap">
  <div class="card" id="card">
    <div class="title">Will you be mine?</div>
    <div class="subtitle">I promise a forever full of peace, patience, and playful smiles. ðŸŒ¿</div>

    <div class="actions">
      <button class="btn btn-yes" id="yesMain">Yes</button>
      <button class="btn btn-no"  id="noMain">No</button>
    </div>

    <div class="success" id="successMsg">YES! You made my world âœ¨ I owe my life and millions of smiles.</div>
  </div>
</div>

<!-- Playful popup -->
<div class="popup" id="popup">
  <div class="popq" id="popq">Are you sure?</div>
  <div class="popsub" id="popsub"></div>
  <div class="pop-actions">
    <button class="btn btn-no"  id="btnNoPopup">No</button>
    <button class="btn btn-yes" id="btnYesPopup">Yes</button>
  </div>
  <div class="pop-note">Choose an option</div>
</div>

<div class="dedication">For you AKSHITHAðŸ’š</div>
<div class="burst" id="burst"></div>

<!-- Final screen (if last NO) -->
<div class="fullscreen" id="okayFine">okay fine ðŸ™‚..</div>

<script>
  /* ---------- Hearts upward ---------- */
  const heartsLayer = document.getElementById('hearts');
  function spawnHeart(){
    const h=document.createElement('div'); h.className='heart';
    const size=Math.random()*10+8; h.style.width=size+'px'; h.style.height=size+'px';
    h.style.left=(Math.random()*100)+'vw'; h.style.bottom='-20px';
    const dur=Math.random()*6+7; h.style.animationDuration=dur+'s';
    h.style.opacity=(0.45+Math.random()*0.35).toFixed(2);
    heartsLayer.appendChild(h); setTimeout(()=>h.remove(), dur*1000+200);
  }
  setInterval(spawnHeart, 280);

  /* ---------- Leaves downward ---------- */
  const leavesLayer = document.getElementById('leaves');
  function spawnLeaf(){
    const l=document.createElement('div'); l.className='leaf';
    const w=window.innerWidth;
    l.style.left=(Math.random()*w)+'px';
    l.style.top='-20px';
    const dur=Math.random()*5+6; l.style.animationDuration=dur+'s';
    l.style.transform = `rotate(${15+Math.random()*20}deg) skewX(-10deg)`;
    leavesLayer.appendChild(l); setTimeout(()=>l.remove(), dur*1000+200);
  }
  setInterval(spawnLeaf, 420);

  /* ---------- Elements ---------- */
  const yesMain = document.getElementById('yesMain');
  const noMain  = document.getElementById('noMain');
  const success = document.getElementById('successMsg');
  const card = document.getElementById('card');

  const popup  = document.getElementById('popup');
  const popq   = document.getElementById('popq');
  const popsub = document.getElementById('popsub');
  const btnNoPopup  = document.getElementById('btnNoPopup');
  const btnYesPopup = document.getElementById('btnYesPopup');

  const finalScreen = document.getElementById('okayFine');

  /* ---------- Popup script & flow ---------- */
  // Step list (6th removed as you asked)
  const STEPS = [
    { q: "Are you sure?", sub:"", yes:"next", no:"celebrate", sky: "var(--sky-1)" },
    { q: "Really sure?", sub:"", yes:"next", no:"celebrate", sky: "var(--sky-2)" },
    { q: "Think again?", sub:"Close your eyes and think, still no", yes:"next", no:"celebrate", sky: "var(--sky-3)" },
    { q: "Last chance..", sub:"we can make good memories", yes:"celebrate", no:"next", sky: "var(--sky-4)" },
    { q: "One more last chance..", sub:"If it's yes, I'll owe you endless chocolate dates", yes:"celebrate", no:"next", sky: "var(--sky-5)" },
    { q: "Final chanceâ€¦", sub:"I make sure you look perfect with me", yes:"celebrate", no:"next", sky: "var(--sky-6)" },
    { q: "Fineâ€¦ last one !", sub:"If still no, let's try to become best couple", yes:"celebrate", no:"final-no", sky: "var(--sky-0)" },
  ];
  let step = 0;

  function rand(min,max){ return Math.random()*(max-min)+min; }
  function placePopupRandom(){
    const w=window.innerWidth,h=window.innerHeight,pw=300,ph=150;
    const x=Math.max(8, Math.min(w-pw-8, rand(10, w-pw-10)));
    const y=Math.max(8, Math.min(h-ph-8, rand(70, h-ph-10)));
    popup.style.left = x + 'px'; popup.style.top = y + 'px';
  }

  function setSky(bg){ document.body.style.background = bg; }

  function openPopup(idx){
    const s = STEPS[idx];
    popq.textContent = s.q;
    popsub.textContent = s.sub || "";
    popsub.style.display = s.sub ? 'block' : 'none';
    setSky(s.sky);
    placePopupRandom();
    popup.classList.add('show');

    // button visual nudge per step
    const grow = 1 + Math.min(.5, idx*0.1);
    const shrink = Math.max(.8, 1 - idx*0.06);
    btnYesPopup.style.transform = `scale(${grow})`;
    btnNoPopup.style.transform  = `scale(${shrink})`;
  }

  function closePopup(){ popup.classList.remove('show'); }

  function celebrate(){
    success.classList.add('show');
    burstAtCenter(); // confetti burst
    card.style.background = 'rgba(255,255,255,0.72)';
    // After 2s change text to the final line
    setTimeout(()=>{
      success.textContent = "You're mine now ðŸ’š Forever starts today.";
    }, 2000);
  }

  function burstAtCenter(){
    const burst = document.getElementById('burst');
    const cx = window.innerWidth/2, cy = window.innerHeight/2;
    for(let i=0;i<54;i++){
      const p=document.createElement('div'); p.className='p';
      const angle=(Math.PI*2)*(i/54);
      const dist=90 + Math.random()*130;
      p.style.left=cx+'px'; p.style.top=cy+'px';
      p.style.setProperty('--tx',(Math.cos(angle)*dist)+'px');
      p.style.setProperty('--ty',(Math.sin(angle)*dist)+'px');
      burst.appendChild(p); setTimeout(()=>p.remove(), 1000);
    }
  }

  // Main Yes/No
  yesMain.addEventListener('click', ()=>{ closePopup(); celebrate(); });
  noMain.addEventListener('click', ()=>{ step=0; openPopup(step); });

  // Popup button logic driven by STEPS mapping
  btnYesPopup.addEventListener('click', ()=>{
    const s = STEPS[step];
    if (s.yes === "celebrate"){ closePopup(); celebrate(); }
    else if (s.yes === "next"){
      step = Math.min(step+1, STEPS.length-1);
      openPopup(step);
    }
  });

  btnNoPopup.addEventListener('click', ()=>{
    const s = STEPS[step];
    if (s.no === "celebrate"){ closePopup(); celebrate(); }
    else if (s.no === "next"){
      step = Math.min(step+1, STEPS.length-1);
      openPopup(step);
    }
    else if (s.no === "final-no"){
      closePopup();
      // after 3 seconds â†’ show â€œokay fine ðŸ™‚..â€
      setTimeout(()=> finalScreen.classList.add('show'), 3000);
    }
  });

  // Clicking outside â†’ playful reposition
  document.addEventListener('click',(e)=>{
    if (popup.classList.contains('show') && !popup.contains(e.target) && e.target!==noMain){
      placePopupRandom();
    }
  });

  // Keep popup in view
  window.addEventListener('resize', ()=>{ if (popup.classList.contains('show')) placePopupRandom(); });

</script>
</body>
</html>
